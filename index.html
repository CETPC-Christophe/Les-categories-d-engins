<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>QCM CACES ‚Äì Les cat√©gories d'engins</title>
<style>
  /* ---------- Th√®me & layout ---------- */
  :root { --orange:#ff6600; --noir:#222; --gris:#f3f3f3; }
  body {
    font-family: 'Segoe UI', Tahoma, sans-serif;
    background: var(--gris);
    color: var(--noir);
    margin: 0;
    min-height: 100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-start;
    padding:16px;
    box-sizing:border-box;
  }

  .banner {
    background:var(--noir);
    color:#fff;
    padding:10px;
    border-radius:10px;
    text-align:center;
    font-weight:700;
    margin-bottom:15px;
    width:100%;
    max-width:820px;
    box-sizing:border-box;
  }

  h1 { color:var(--orange); margin:8px 0; text-align:center; }
  .subtitle { color:#555; text-align:center; margin-bottom:18px; }

  .question {
    background:#fff;
    padding:16px;
    margin:8px auto;
    border-left:8px solid var(--orange);
    border-radius:10px;
    box-shadow:0 3px 6px rgba(0,0,0,0.08);
    width:100%;
    max-width:820px;
    box-sizing:border-box;
    text-align:center;
  }
  .question p { font-weight:600; margin:8px 0; }

  .answers {
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:8px;
    margin-top:6px;
  }
  .answers label {
    display:flex;
    align-items:center;
    justify-content:center;
    gap:10px;
    width:100%;
    max-width:520px;
    padding:8px 10px;
    border-radius:8px;
    cursor:pointer;
    border:1px solid #eee;
  }
  .answers input[type="radio"] { transform:scale(1.05); }

  button {
    background:var(--orange);
    color:#fff;
    border:none;
    padding:10px 18px;
    border-radius:8px;
    font-size:1rem;
    cursor:pointer;
  }
  button[disabled] { opacity:0.6; cursor:default; }
  button:hover:not([disabled]) { background:#e65c00; }

  .footer { text-align:center; color:#777; margin-top:20px; font-size:0.9rem; }

  @media (max-width:600px) {
    .question{ padding:14px; max-width:95%; }
    .answers label{ max-width:100%; }
    button{ padding:10px 14px; }
  }
</style>
</head>
<body>

<!-- Banniere + titre -->
<div class="banner" id="quizBanner">üöß Les cat√©gories d'engins üöú</div>
<h1>√âVALUATION</h1>
<p class="subtitle" id="quizSubtitle">R√©pondez aux questions tir√©es au hasard</p>

<!-- √âcran d'accueil : saisie du nom -->
<div id="intro" style="width:100%; max-width:820px; display:flex; justify-content:center;">
  <div class="question" style="text-align:center;">
    <p><strong>Bienvenue</strong></p>
    <p>Merci d'indiquer votre nom (pas le pr√©nom) avant de commencer :</p>
    <input id="candidateName" type="text" placeholder="Nom de l'√©l√®ve"
           style="padding:8px; width:80%; max-width:320px; border-radius:6px; border:1px solid #ccc;">
    <div style="margin-top:12px;">
      <button id="startBtn" disabled>‚û°Ô∏è Suivant</button>
    </div>
  </div>
</div>

<!-- Conteneur des questions rendu dynamiquement -->
<div id="quiz" style="width:100%; max-width:820px; min-height:220px; display:none; align-items:center; justify-content:center;"></div>

<!-- Zone d'√©tat et bouton 'nouvelle √©valuation' -->
<div style="width:100%; max-width:820px; text-align:center; margin-top:12px;">
  <button id="restartBtn" style="display:none;">üîÑ Nouvelle √©valuation</button>
  <div id="saveStatus" style="margin-top:8px; color:#444; font-size:0.95rem;"></div>
</div>

<p id="result" style="text-align:center; font-weight:700; margin-top:14px;"></p>
<p class="footer">¬© Formation S√©curit√© CACES¬Æ R482A ‚Äì Quiz interactif</p>

<script>
/* ============================ */
/*         CONFIG              */
/* ============================ */
const QUIZ_NAME = "Les cat√©gories d'engins";
const RESULTS_ENDPOINT = "https://script.google.com/macros/s/AKfycbzSnnlxH2dCzkVqobrQX-E4n4lo-WcxoDvmLHr7cLn35d4xploO_K3p9tNuY0OweRsW/exec";

/* ============================ */
/*         QUESTIONS            */
/* ============================ */
const allQuestions = [
  {
    "text": "Les pelles hydrauliques de 6 tonnes ou moins appartiennent √† la cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse sur pneus de 4 tonnes fait partie de la cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une pelle hydraulique sur pneus de 7 tonnes est incluse dans la cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un compacteur de 5 tonnes est class√© dans la cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un moto-basculeur de 8 tonnes de charge utile appartient √† la cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les tracteurs agricoles de cat√©gorie A ne doivent pas d√©passer 100 cv.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les chargeuses-pelleteuses de masse ‚â§ 6 tonnes sont en cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse sur chenilles de 6 tonnes est un engin de cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une pelle hydraulique de 6,1 tonnes peut √™tre class√©e en cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les moto-basculeurs de charge utile ‚â§ 6 tonnes sont class√©s en cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une minipelle de 3 tonnes appartient √† la cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les tracteurs agricoles ‚â§ 73,6 kW rel√®vent de la cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les chargeuses de plus de 6 tonnes sont incluses dans la cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un compacteur de 2 tonnes est un engin de cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les pelles hydrauliques de masse ‚â§ 6 tonnes peuvent √™tre √† chenilles ou pneus.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse-pelleteuse de 7 tonnes rel√®ve de la cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Tous les tracteurs agricoles, quelle que soit leur puissance, sont en cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les engins compacts de cat√©gorie A d√©passent toujours 6 tonnes.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les compacteurs de masse ‚â§ 6 tonnes appartiennent √† la cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les pelles hydrauliques de plus de 6 tonnes sont class√©es en cat√©gorie B1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une pelle multifonctions appartient √† la cat√©gorie B1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une pelle hydraulique de 5 tonnes est incluse dans la cat√©gorie B1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les pelles hydrauliques de plus de 6 tonnes peuvent √™tre sur chenilles ou pneus.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les pelles multifonctions sont les seuls engins de la cat√©gorie B1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une pelle hydraulique de 10 tonnes rel√®ve de la cat√©gorie B1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse de 8 tonnes est class√©e en cat√©gorie B1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une pelle multifonctions de 12 tonnes appartient √† la cat√©gorie B1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les pelles hydrauliques de masse ‚â§ 6 tonnes sont en cat√©gorie B1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les pelles multifonctions font partie des engins de d√©placement s√©quentiel.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une pelle hydraulique sur pneus de 7 tonnes rel√®ve de la cat√©gorie B1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un compacteur de 7 tonnes est class√© en cat√©gorie B1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les pelles hydrauliques sur chenilles sont √©ligibles √† la cat√©gorie B1 si > 6 tonnes.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une pelle multifonctions est un engin de cat√©gorie A.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les pelles multifonctions ne rel√®vent jamais de la cat√©gorie B1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une pelle hydraulique de 20 tonnes appartient √† la cat√©gorie B1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les pelles hydrauliques de cat√©gorie B1 doivent obligatoirement √™tre sur chenilles.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les engins de cat√©gorie B1 sont utilis√©s pour l‚Äôextraction √† d√©placement s√©quentiel.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une pelle multifonctions peut appartenir √† une autre cat√©gorie que B1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une pelle de 6 tonnes pile est en cat√©gorie B1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les chargeuses sur pneumatiques de plus de 6 tonnes appartiennent √† la cat√©gorie C1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse-pelleteuse de 7 tonnes rel√®ve de la cat√©gorie C1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les chargeuses sur pneus ‚â§ 6 tonnes sont en cat√©gorie C1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une chargeuse-pelleteuse de 5 tonnes est class√©e en cat√©gorie C1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les chargeuses sur pneumatiques > 6 tonnes sont des engins de chargement alternatif.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les chargeuses-pelleteuses > 6 tonnes sont dans la cat√©gorie C1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une pelleteuse hydraulique de 10 tonnes est en cat√©gorie C1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une chargeuse sur pneus de 12 tonnes est en cat√©gorie C1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse-pelleteuse de 9 tonnes appartient √† la cat√©gorie C1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les chargeuses sur chenilles > 6 tonnes sont dans la cat√©gorie C1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une chargeuse sur pneus de 6 tonnes appartient √† la cat√©gorie C1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "La cat√©gorie C1 concerne uniquement les engins sur pneumatiques.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse-pelleteuse de 7 tonnes rel√®ve de la cat√©gorie C1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les chargeuses sur pneumatiques de 4 tonnes appartiennent √† la cat√©gorie C1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Toutes les chargeuses, quel que soit leur poids, sont class√©es en cat√©gorie C1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une chargeuse-pelleteuse de 12 tonnes est en cat√©gorie C1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les chargeuses > 6 tonnes appartiennent √† la cat√©gorie C1 uniquement si sur pneumatiques.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse sur chenilles de 7 tonnes est incluse dans la cat√©gorie C1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les engins de cat√©gorie C1 sont des engins de chargement.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse-pelleteuse de 10 tonnes n‚Äôappartient pas √† la cat√©gorie C1.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les bouteurs sont class√©s dans la cat√©gorie C2.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les chargeuses √† chenilles de plus de 6 tonnes appartiennent √† la cat√©gorie C2.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse √† chenilles de 4 tonnes rel√®ve de la cat√©gorie C2.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un bouteur appartient toujours √† la cat√©gorie C2.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse sur pneus de 10 tonnes appartient √† la cat√©gorie C2.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une chargeuse √† chenilles de 8 tonnes fait partie de la cat√©gorie C2.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les bouteurs sont des engins de nivellement et non de r√©glage.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une chargeuse √† chenilles de 7 tonnes appartient √† la cat√©gorie C2.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une pelle hydraulique de 20 tonnes est en cat√©gorie C2.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "La cat√©gorie C2 concerne les engins de r√©glage √† d√©placement alternatif.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les chargeuses √† chenilles ‚â§ 6 tonnes sont class√©es en cat√©gorie C2.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un bouteur de grande taille appartient √† la cat√©gorie C2.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les chargeuses √† chenilles ne sont pas concern√©es par la cat√©gorie C2.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une chargeuse sur pneus > 6 tonnes rel√®ve de la cat√©gorie C2.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Tout bouteur est en cat√©gorie C2.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse √† chenilles de 12 tonnes est incluse dans la cat√©gorie C2.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "La cat√©gorie C2 concerne les engins de r√©glage.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les bouteurs l√©gers < 6 tonnes appartiennent √† la cat√©gorie C2.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse √† chenilles de 5 tonnes est incluse dans la cat√©gorie C2.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "La cat√©gorie C2 inclut les chargeuses √† chenilles uniquement au-del√† de 6 tonnes.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les niveleuses automotrices appartiennent √† la cat√©gorie C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un bouteur est class√© en cat√©gorie C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une niveleuse automotrice de grande taille rel√®ve de la cat√©gorie C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse √† chenilles est en cat√©gorie C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "La cat√©gorie C3 est r√©serv√© exclusivement aux niveleuses.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une niveleuse automotrice de 10 tonnes appartient √† la cat√©gorie C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une pelle multifonctions appartient √† la cat√©gorie C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une niveleuse automotrice est un engin de nivellement.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les tombereaux sont class√©s en cat√©gorie C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une niveleuse automotrice neuve appartient √† la cat√©gorie C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les compacteurs font partie de la cat√©gorie C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une niveleuse automotrice, quel que soit son poids, appartient √† la cat√©gorie C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les engins de r√©glage sont dans la cat√©gorie C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les niveleuses automotrices constituent l‚Äôunique famille d‚Äôengins en cat√©gorie C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "La cat√©gorie C3 regroupe tous les engins automoteurs.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une niveleuse automotrice de 20 tonnes rel√®ve de la cat√©gorie C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse-pelleteuse appartient √† la cat√©gorie C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une niveleuse automotrice de 6 tonnes appartient √† C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les finisseurs routiers sont class√©s en cat√©gorie C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Toutes les niveleuses automotrices sont class√©es en cat√©gorie C3.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les compacteurs de plus de 6 tonnes appartiennent √† la cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un compacteur √† pieds dameurs de 8 tonnes est en cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un compacteur de 5 tonnes appartient √† la cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les compacteurs mixtes de plus de 6 tonnes rel√®vent de la cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un compacteur √† pneumatiques de 20 tonnes est en cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les compacteurs √† pieds dameurs ‚â§ 6 tonnes sont class√©s en cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les compacteurs √† cylindres > 6 tonnes sont inclus en cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les compacteurs de masse ‚â§ 6 tonnes rel√®vent de la cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Tous les compacteurs, quelle que soit leur masse, sont en cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un compacteur mixte de 7 tonnes est un engin de cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un compacteur de 9 tonnes appartient √† la cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse de 8 tonnes est en cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un compacteur √† pieds dameurs de 12 tonnes rel√®ve de la cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les compacteurs routiers de faible masse sont en cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les compacteurs √† pneumatiques de plus de 6 tonnes appartiennent √† la cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les compacteurs de masse > 6 tonnes appartiennent √† une autre cat√©gorie que la D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un compacteur √† cylindres l√©ger est en cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les compacteurs > 6 tonnes sont int√©gralement dans la cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un compacteur √† cylindres de 15 tonnes rel√®ve de la cat√©gorie D.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les tombereaux, rigides ou articul√©s, sont class√©s en cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un moto-basculeur de plus de 6 tonnes de charge utile appartient √† la cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un tombereau de 3 tonnes appartient √† la cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les tracteurs agricoles de plus de 100 cv rel√®vent de la cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un moto-basculeur de 5 tonnes de charge utile est en cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Tous les tracteurs, quelle que soit leur puissance, sont en cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un tombereau articul√© de grande taille est en cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les tracteurs agricoles ‚â§ 100 cv appartiennent √† la cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un moto-basculeur de 7 tonnes de charge utile appartient √† la cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les tombereaux rigides sont inclus dans la cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse sur pneus de 12 tonnes rel√®ve de la cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un tracteur agricole de 150 cv rel√®ve de la cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un tombereau articul√© appartient √† la cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les moto-basculeurs ‚â§ 6 tonnes de charge utile appartiennent √† la cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un tombereau sur chenilles est class√© en cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Tous les engins transportant des mat√©riaux sont en cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un tracteur agricole > 73,6 kW appartient √† la cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un tombereau articul√© de 50 tonnes rel√®ve de la cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les tombereaux doivent obligatoirement √™tre articul√©s pour √™tre en cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un moto-basculeur de 10 tonnes de charge utile appartient √† la cat√©gorie E.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les chariots √† m√¢t tout-terrain √† conducteur port√© appartiennent √† la cat√©gorie F.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les chariots √† fl√®che t√©lescopique tout-terrain appartiennent √† la cat√©gorie F.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une chargeuse-pelleteuse rel√®ve de la cat√©gorie F.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un chariot t√©lescopique tout-terrain de 10 m est en cat√©gorie F.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les chariots de magasinage (industriels) appartiennent √† la cat√©gorie F.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les chariots √† m√¢t tout-terrain √† conducteur port√© sont en cat√©gorie F.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un chariot √©l√©vateur √©lectrique de magasin est en cat√©gorie F.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un chariot t√©lescopique tout-terrain rel√®ve de la cat√©gorie F.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les engins de transport sont class√©s en cat√©gorie F.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un chariot t√©lescopique tout-terrain est un engin de la cat√©gorie F.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Une niveleuse ne peut pas √™tre consid√©r√©e dans la cat√©gorie F.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un tracteur agricole puissant est class√© en cat√©gorie F.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Les chariots tout-terrain appartiennent exclusivement √† la cat√©gorie F.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "La cat√©gorie G concerne le d√©placement d‚Äôengins sans activit√© de production.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "La cat√©gorie G inclut le chargement/d√©chargement sur porte-engins.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un engin en activit√© de production est class√© en cat√©gorie G.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une pelle hydraulique en travail de terrassement rel√®ve de la cat√©gorie G.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "La cat√©gorie G s‚Äôapplique aux essais et d√©monstrations.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les engins doivent √™tre modifi√©s pour appartenir √† la cat√©gorie G.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "La cat√©gorie G est li√©e √† la conduite hors production.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Les engins agricoles seuls sont dans la cat√©gorie G.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Une chargeuse travaillant en carri√®re est un engin de cat√©gorie G.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "La cat√©gorie G concerne uniquement les tombereaux.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un test fonctionnel d‚Äôun engin rel√®ve de la cat√©goire G.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "Un compacteur travaillant sur chantier est en cat√©gorie G.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Tous les engins A-F peuvent √™tre concern√©s par la cat√©gorie G.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  },
  {
    "text": "La cat√©gorie G concerne uniquement les engins en maintenance.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Faux"
  },
  {
    "text": "Un engin utilis√© pour une d√©monstration rel√®ve de la cat√©gorie G.",
    "answers": [
      "Vrai",
      "Faux"
    ],
    "correct": "Vrai"
  }
]
;

/* ============================ */
/*         VARIABLES D'√âTAT     */
/* ============================ */
let selectedQuestions = [];
let currentIndex = 0;
let userAnswers = [];
let candidateName = "";

/* ============================ */
/*         UTILITAIRES          */
/* ============================ */
function formatDateTime(isoString) {
  const date = new Date(isoString);
  const d = String(date.getDate()).padStart(2,'0');
  const m = String(date.getMonth()+1).padStart(2,'0');
  const y = date.getFullYear();
  const hh = String(date.getHours()).padStart(2,'0');
  const min = String(date.getMinutes()).padStart(2,'0');
  const sec = String(date.getSeconds()).padStart(2,'0');
  return `${d}/${m}/${y} ${hh}:${min}:${sec}`;
}

function getRandomQuestions(num) {
  let used = JSON.parse(localStorage.getItem("usedQuestions") || "[]");
  let available = allQuestions.filter(q => !used.includes(q.text));
  if (available.length < num) { used=[]; available=[...allQuestions]; }
  available.sort(() => Math.random() - 0.5);
  const selected = available.slice(0, num);
  selected.forEach(q => used.push(q.text));
  localStorage.setItem("usedQuestions", JSON.stringify(used));
  return selected;
}

/* ============================ */
/*     AFFICHAGE ET NAVIGATION  */
/* ============================ */
function showIntro() {
  document.getElementById('intro').style.display = 'flex';
  document.getElementById('quiz').style.display = 'none';
  document.getElementById('restartBtn').style.display = 'none';
  document.getElementById('result').textContent = '';
  document.getElementById('saveStatus').textContent = '';

  const nameInput = document.getElementById('candidateName');
  const startBtn = document.getElementById('startBtn');

  nameInput.value = "";
  startBtn.disabled = true;

  nameInput.oninput = () => { startBtn.disabled = nameInput.value.trim() === ""; };
}

function startQuiz() {
  candidateName = document.getElementById('candidateName').value.trim();
  if (!candidateName) return;

  document.getElementById('intro').style.display = 'none';
  document.getElementById('quiz').style.display = 'flex';
  document.getElementById('restartBtn').style.display = 'none';
  document.getElementById('saveStatus').textContent = '';

  selectedQuestions = getRandomQuestions(20);
  currentIndex = 0;
  userAnswers = new Array(selectedQuestions.length).fill("");

  document.getElementById('quizSubtitle').textContent =
    `R√©pondez √† ${selectedQuestions.length} questions tir√©es au hasard`;

  renderQuestion();
}

function renderQuestion() {
  const q = selectedQuestions[currentIndex];

  const optionsHtml = q.answers.map((a, idx) => {
    const inputId = `q${currentIndex}_opt${idx}`;
    return `<label for="${inputId}">
              <input id="${inputId}" type="radio" name="q" value="${a}"> ${a}
            </label>`;
  }).join("");

  document.getElementById('quiz').innerHTML = `
    <div class="question">
      ${q.image ? `<img src="${q.image}" alt="Illustration question"
      style="max-width:100%; height:auto; margin-bottom:10px; border-radius:6px;">` : ''}
      <p>‚öôÔ∏è <strong>Question ${currentIndex + 1} :</strong> ${q.text}</p>
      <div class="answers">${optionsHtml}</div>
      <div style="margin-top:15px; text-align:center;">
        <button id="nextBtnInternal" disabled>
          ${(currentIndex === selectedQuestions.length - 1) ? "üèÅ Terminer" : "‚û°Ô∏è Suivant"}
        </button>
      </div>
    </div>
  `;

  const nextBtn = document.getElementById('nextBtnInternal');

  document.querySelectorAll('input[name="q"]').forEach(radio => {
    radio.addEventListener('change', () => { nextBtn.disabled = false; });
  });

  nextBtn.addEventListener('click', () => {
    const selected = document.querySelector('input[name="q"]:checked');
    if (!selected) return;

    userAnswers[currentIndex] = selected.value;

    if (currentIndex < selectedQuestions.length - 1) {
      currentIndex++;
      renderQuestion();
    } else {
      showResults();
    }
  });
}

/* ============================ */
/*        AFFICHAGE RESULTATS    */
/* ============================ */
function buildResultObject() {
  const now = new Date();
  let score = 0;
  const details = selectedQuestions.map((q,i) => {
    const given = userAnswers[i] || "";
    if(given === q.correct) score++;
    return { question:q.text, given, correct:q.correct };
  });
  return {
    timestamp: now.toISOString(),
    candidate:candidateName,
    score,
    total:selectedQuestions.length,
    details,
    quiz:QUIZ_NAME
  };
}

function showResults() {
  document.getElementById('quiz').innerHTML = `
    <div class="question">
      <p>‚öôÔ∏è V√©rification de vos r√©ponses...</p>
    </div>
  `;
  document.getElementById('saveStatus').textContent = '';
  sendResults();
}

function sendResults() {
  const payload = buildResultObject();
  const statusEl = document.getElementById('saveStatus');

  statusEl.textContent = "Envoi en cours...";

  fetch(RESULTS_ENDPOINT, {
    method:"POST",
    mode:"no-cors",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify(payload)
  })
  .then(() => {
    statusEl.textContent = "Envoi r√©ussi ‚úîÔ∏è";

    const score = payload.score;
    const timestamp = formatDateTime(payload.timestamp);

    document.getElementById('quiz').innerHTML = `
      <div class="question">
        <p>üè∑Ô∏è Candidat : <strong>${payload.candidate}</strong></p>
        <p>üèÅ R√©sultat : <span style="color:var(--orange); font-weight:700;">${score}</span> / ${payload.total}</p>
        <p>‚è±Ô∏è R√©alis√© le : <strong>${timestamp}</strong></p>
      </div>
    `;

    document.getElementById('restartBtn').style.display = 'inline-block';
  })
  .catch(err => {
    statusEl.textContent = "Erreur: " + err.message;
  });
}

/* ============================ */
/*        RED√âMARRER            */
/* ============================ */
function restartQuiz() { showIntro(); }

/* ============================ */
/*      INITIALISATION          */
/* ============================ */
document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('quizBanner').textContent = `üöß ${QUIZ_NAME} üöú`;
  document.getElementById('startBtn').addEventListener('click', startQuiz);
  document.getElementById('restartBtn').addEventListener('click', restartQuiz);
  showIntro();
});
</script>
</body>
</html>
